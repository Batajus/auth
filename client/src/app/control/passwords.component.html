<div [formGroup]="formGroup">
    <div>
        <mat-form-field appearance="standard">
            <mat-label>Password *</mat-label>
            <input
                matInput
                [type]="hide ? 'password' : 'text'"
                placeholder="Password"
                formControlName="password"
                (focus)="passwordFocus = true"
                (blur)="passwordFocus = false"
                autocomplete="on"
            />
            <button type="button" mat-icon-button matSuffix (click)="hide = !hide">
                <mat-icon>{{ hide ? 'visibility_off' : 'visibility' }}</mat-icon>
            </button>
            <mat-error *ngIf="formGroup.get('password').hasError('required')">The password is required</mat-error>
        </mat-form-field>
        <div class="passwordCriterias" [class.focus]="passwordFocus" *ngIf="formGroup.get('password').errors as err">
            <div [ngClass]="{ 'not-fulfilled': err.length, fulfilled: !err.length }">
                <mat-icon>{{ err.length ? 'clear' : 'done' }}</mat-icon
                >min 8 characters
            </div>
            <div [ngClass]="{ 'not-fulfilled': err.upperCase, fulfilled: !err.upperCase }">
                <mat-icon>{{ err.upperCase ? 'clear' : 'done' }}</mat-icon
                >min. 1 upper case
            </div>
            <div [ngClass]="{ 'not-fulfilled': err.lowerCase, fulfilled: !err.lowerCase }">
                <mat-icon>{{ err.lowerCase ? 'clear' : 'done' }}</mat-icon
                >min. 1 lower case
            </div>
            <div [ngClass]="{ 'not-fulfilled': err.number, fulfilled: !err.number }">
                <mat-icon>{{ err.number ? 'clear' : 'done' }}</mat-icon
                >min. 1 number
            </div>
            <div [ngClass]="{ 'not-fulfilled': err.special, fulfilled: !err.special }">
                <mat-icon>{{ err.special ? 'clear' : 'done' }}</mat-icon
                >1 special character (*.!@$%^&:;,.?~+-=)
            </div>
        </div>
    </div>
    <div>
        <mat-form-field>
            <mat-label>Repeat password *</mat-label>
            <input
                matInput
                type="password"
                placeholder="Repeat Password"
                formControlName="repeatedPassword"
                autocomplete="on"
            />
            <mat-error *ngIf="formGroup.get('repeatedPassword').hasError('required')"
                >"Repeat password" is required</mat-error
            >
        </mat-form-field>
        <mat-error
            class="external-mat-error"
            *ngIf="!formGroup.get('repeatedPassword').hasError('required') && formGroup.hasError('equality')"
            >The passwords must be equal</mat-error
        >
    </div>
</div>
